## Gold Point Game黄金点游戏

Python 3.6 版本运行

require numpy 依赖numpy库



### Test Result测试用例

| Policy                            | Nearest | Farthest | Score | Ranking | Dataset |
| --------------------------------- | ------- | -------- | ----- | ------- | ------- |
| moving_exp_avg + detect +disturb  | 83/400  | 268/400  | 1028  | 1/24    | 1       |
| moving_exp_avg + detect + disturb | 77/400  | 267/400  | 916   | 1/24    | 2       |
| moving_exp_avg + disturb          | 59/400  | 257/400  | 594   | 1/24    | 1       |
| moving_exp_avg + disturb          | 60/400  | 255/400  | 612   | 2/24    | 2       |
|                                   |         |          |       |         |         |
|                                   |         |          |       |         |         |

接口设计
首先我们将整个软件架构分为3块，第一块为交互模块，这个模块的任务主要负责和比赛程序的输入输出进行交互，并将获得的数据预处理后发送给第二个模块；第二个模块为策略模块，这个模块主要实现一些策略，这些策略能根据给定的预处理数据来预测下一次黄金点的值；第三个模块为控制模块，主要负责协调交互模块和策略模块之间的工作。下面分别介绍这三个模块：

交互模块
主要文件为：data.py

主要函数：Data.observe()

主要函数功能描述：读取标准输入流的数据格式，通过 numpy 的矩阵变换获得两个输出：

黄金点历史信息：g_history：这是一个1维的 ndarray，记录了从第一轮开始到当前轮的所有黄金点值(ground truth)
各队提交历史信息：team_history：这是一个3维 ndarray ：记录了从第一轮开始到当前轮每个队的提交信息，其中第一维表示队伍的编号，第二维表示对应的轮数，第三维表示提交的第一个数和第二个数.
策略模块
主要文件为：policy.py

成员函数：

成员函数名	成员函数功能
Policy.__init__

(game_iter, team_num)

设定策略模块的基本信息：游戏进行的轮数，

队伍的数量，各个策略的全局参数

Policy.__basic__average(arr)	平均策略，获得当前给定队列的平均值点
Policy.moving_avg

( g_history, team_history)

滑动平均策略，根据给定的历史黄金点信息，

通过滑动平均预测下一个黄金点的信息,

对Policy.__moving_avg__(arr) 的一次封装

Policy.__check_fluct__

(g_history)

检测黄金点的波动，返回最近check_window

次内黄金点的波动范围

Policy.moving_exp_avg

( g_history, team_history)

指数滑动平均策略，根据给定的历史黄金点信息，

通过指数滑动平均预测下一个黄金点的信息

Policy.__detect_fluct__

(g_history, team_history)

检测其他队伍干扰的情况，根据每个队伍的输入和

黄金点的偏差，如果这个偏差大于一定的值，我们

认为这个队伍会对黄金点进行干扰，当我们采取干

扰策略时，我们的目标是制造干扰，但同时也不想

因为干扰造成失分，因此这个函数会返回一个干扰

队伍产生干扰的平均值，当我们进行干扰时，干扰

值会选择小于这个值进行扰动

[此函数在第二轮比赛中已经废弃]

Policy.random_fluctuation

(pred, max_bias, exp_mea)

这个函数在第二轮比赛中已经进行了修改：当检测

到黄金值在最近几轮中稳定时（波动范围小于2），

我们采取扰动策略，根据滑动平均的预测值基础上，

随机增加10-40作为一个干扰值，并根据这个干扰值

重新调整我们自身的滑动平均预测值；如果黄金点在

最近几轮中波动较大（大于2），说明有队伍在进行

干扰，那么我们采取的措施是通过提交滑动平均，

指数滑动平均两个值进行预测。结果返回所要提交的两个数

Policy.predict

(g_history, team_history)

这个函数作为外部模块（控制模块）调用本模块时的接

口，基于以上的策略进行组合输出最终提交的两个数字

控制模块
主要文件: get_numbers.py
没有成员函数，主要功能为衔接交互模块和策略块，进行最终提交。
